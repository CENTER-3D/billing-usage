---

copyright:
  years: 2019
lastupdated: "2019-07-29"

keywords: enterprise usage, view enterprise costs, account group usage, account usage, cost recovery, chargeback, support cost

subcollection: billing-usage

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:tip: .tip}
{:screen: .screen}
{:external: target="_blank" .external}
{:note: .note}


# エンタープライズ内の使用量の表示
{: #enterprise-usage}

{{site.data.keyword.Bluemix}} エンタープライズ内のアカウントの使用量を表示することによって、アカウントのリソースおよびサポートのコストを追跡できます。使用量を表示できるアカウントおよびアカウント・グループは、割り当てられたアクセス権限によって異なります。
{: shortdesc}

{{site.data.keyword.Bluemix_notm}} エンタープライズを使用すると、複数の {{site.data.keyword.Bluemix_notm}} アカウントを一元管理できます。エンタープライズ・ユーザーは、エンタープライズ内のすべてのアカウントのリソース使用量および関連コストを監視できます。詳しくは、『[エンタープライズとは](/docs/account?topic=account-enterprise)』を参照してください。

## エンタープライズ使用量を表示するために必要なアクセス権限
{: #enterprise-usage-access}

エンタープライズでの使用量情報へのアクセス権限はエンタープライズ・サービスによって制御されます。使用量情報を表示するには、ユーザーはエンタープライズ・アカウントに招待されなければならず、エンタープライズ・サービスに対する、使用量レポート・ビューアー、エディター、または管理者の役割を持っている必要があります。使用量レポート・ビューアー役割は使用量レポートの表示のみを行えるアクセス権限を提供しますが、エディター役割および管理者役割は追加のエンタープライズ管理アクションを可能にします。セキュリティーのベスト・プラクティスに従って、ユーザーが各自のタスクを実行するために必要な最小限のアクセス権限を割り当ててください。詳しくは、『[エンタープライズのアクションと役割](/docs/iam?topic=iam-account-services#enterprise-account-management)』を参照してください。

きめ細かなアクセス権限をユーザーに付与して、ユーザーが特定のアカウントまたはアカウント・グループの使用量を表示できるようにすることができます。例えば、エンタープライズに各部門のアカウント・グループがあり、各部門に各チームのアカウント・グループがあるとします。各エンタープライズ・ユーザーが自分の職務を遂行するために必要な情報のみを表示できるように、アクセス権限の範囲を設定できます。
   * 財務担当者は、各部門のコストを追跡および回収できるようにエンタープライズ全体の使用量を表示する必要がありますが、アカウントまたはアカウント・グループを作成する必要はありません。彼らにはエンタープライズの使用量レポート・ビューアー役割を割り当てます。
   * 各部門リーダーは、自分の部門の使用量を表示する必要があり、部門のチームのためにアカウントおよびアカウント・グループを作成および管理する必要もあります。各部門リーダーには、部門のアカウント・グループのエディター役割を割り当てます。
   * 各チーム・リーダーは、自分のチームの使用量を表示する必要がありますが、チームに新規アカウントを追加するには部門の承認を受ける必要があります。各チーム・リーダーには、チームのアカウント・グループの使用量レポート・ビューアー役割を割り当てます。彼らはアカウント・グループ内のすべてのアカウントからの使用量を表示できますが、部門内の他のチームのアカウント・グループからの使用量は表示できません。

エンタープライズのアクセス権限の割り当ての詳しい手順については、『[エンタープライズのアクセス権限の割り当て](/docs/iam?topic=iam-assign-access-enterprise)』を参照してください。

## エンタープライズ使用量の表示
{: #enterprise-usage-console}

1. エンタープライズ・アカウントにログインします。
1. **「管理」 > 「請求および使用量」**に移動して、**「使用量」**を選択します。

   「使用量」ページには、エンタープライズ内のすべてのリソース使用量のコストが、アカウントおよびアカウント・グループ別に細分化されて表示されます。エンタープライズ全体のサポート・クレジット使用量、および発生した超過量も表示されます。

   現在の請求対象期間には、クラシック・インフラストラクチャー・サービスの使用量情報は含まれません。ただし、前の請求対象期間には含まれています。これは、**「時間フレーム」** メニューから前の月を選択することで表示できます。詳しくは、『[クラシック・インフラストラクチャー・リソースの使用量の表示](/docs/billing-usage?topic=billing-usage-infra-usage)』を参照してください。
1. アカウント・グループ内の使用量を表示するには、表または **「エンタープライズ・レベル」**メニューでアカウント・グループ名をクリックします。エンタープライズ・レベルと同様に、使用量はアカウントおよびアカウント・グループ別に細分化されます。

   アカウント・グループにアカウントが含まれていない場合、そのアカウント・グループは「使用量」ページに表示されません。

1. リソース別に使用量を表示するには、表内のアカウント・グループをクリックするか、**「エンタープライズ・レベル」**メニューからアカウントを選択して、アカウント・レベルに移動します。時間フレーム中に使用されたリソースのタイプごとのコストが表示されます。

   エンタープライズ・アカウントからリソース・プランまたはインスタンスの使用量データを表示することはできません。それには該当アカウント内のアクセス権限が必要であるためです。アカウント内のユーザーである場合は、そのアカウントに切り替えてこのデータを表示してください。『[使用量の表示](/docs/billing-usage?topic=billing-usage-viewingusage)』で説明されているように、該当アカウント内のリソースおよびサービスへの請求処理アクセス権限が必要です。

エンタープライズ内のアカウントによって発生した使用量についてのデータのみがエンタープライズ・アカウントで表示されます。アカウントがエンタープライズに追加される前の使用量を表示するには、そのアカウントにログインし、関連する時間フレームを選択します。
{: note}

### CLI を使用したエンタープライズ使用量の表示
{: #enterprise-usage-cli}

エンタープライズ、アカウント・グループ、または特定のアカウントの使用量レポートを取得できます。

1. ログインし、エンタープライズ・アカウントを選択します。

   ```
   ibmcloud login
   ```
   {:codeblock}

1. 特定のアカウント・グループまたはアカウントの使用量を表示するには、**`ibmcloud enterprise`** コマンドを実行して、名前または ID を見つけます。

   例えば、次のコマンドは、エンタープライズ内のすべてのアカウント・グループを表示します。

   ```
   ibmcloud enterprise account-groups --recursive
   ```
   {: codeblock}

1. 以下の例のように、**`ibmcloud billing`** コマンドを実行して使用量を表示します。

   * 現在の月のエンタープライズ全体の使用量を表示します。

      ```
      ibmcloud billing enterprise-usage
      ```
      {: codeblock}

   * 2019 年 7 月の `Development` アカウント・グループの使用量を表示します。

      ```
      ibmcloud billing enterprise-usage --account-group Development --month 2019-07
      ```
      {:codeblock}

   * エンタープライズのすぐ下にあるアカウント・グループおよびアカウントの使用量を表示します。

      ```
      ibmcloud billing enterprise-usage --children
      ```
      {:codeblock}

   デフォルトでは、これらのコマンドは現在の月の使用量レポートを以下の形式で出力します。ほとんどのコストは請求可能コストとしてリストされます。請求不能コストは、トライアル・アカウントをエンタープライズに追加した月など、非常にまれなケースでのみリストされます。

   ```
   Name             Type            Billable Cost   Non-billable Cost   Currency   Month   
Example Corp     account         123.45          0                   USD        2019-07   
Development      account_group   234.56          0                   USD        2019-07   
Marketing        account_group   345.67          0                   USD        2019-07   
Sales            account_group   456.78          0                   USD        2019-07
   ```

   `--output JSON` オプションを指定することによって、レポートを JSON 形式で出力できます。
   {: tip}

### API を使用したエンタープライズ使用量の表示
{: #enterprise-usage-api}

<!-- [Enterprise Usage Reports API (Beta)](https://{DomainName}/apidocs/enterprise-apis/resource-usage-reports){: external} --> Enterprise Usage Reports API (ベータ) を呼び出すことによって、エンタープライズおよびそのアカウントからの使用量レポートを取得できます。エンタープライズ、アカウント・グループ、またはアカウントに対する照会を API 呼び出しに作成して、エンティティーまたはその子を表示するかどうかを指定できます。Enterprise Usage Reports API はベータ版です。

以下の例は、さまざまな使用量レポートを取得するために使用できる照会を示しています。API を呼び出す際、ID の変数と IAM トークンは実際のエンタープライズの値に置き換えてください。

現在の月のエンタープライズ全体の使用量を表示します。

```
curl -X GET \
"https://enterprise.test.cloud.ibm.com/v1/resource-usage-reports?enterprise_id=$ENTERPRISE_ID" \
-H "Authorization: Bearer <IAM_Token>" \
-H 'Content-Type: application/json'
```
{: codeblock}

特定のアカウント・グループの 2019 年 7 月の使用量を表示します。

```
curl -X GET \
"https://enterprise.test.cloud.ibm.com/v1/resource-usage-reports?account_group_id=$ACCOUNT_GROUP_ID&month=2019-07" \
-H "Authorization: Bearer <IAM_Token>" \
-H 'Content-Type: application/json'
```
{: codeblock}

エンタープライズのすぐ下にあるアカウント・グループおよびアカウントの使用量を表示します。

```
curl -X GET \
"https://enterprise.test.cloud.ibm.com/v1/resource-usage-reports?enterprise_id=$ENTERPRISE_ID&children=true" \
-H "Authorization: Bearer <IAM_Token>" \
-H 'Content-Type: application/json'
```
{: codeblock}


## エンタープライズ使用コストの回収
{: #enterprise-cost-recovery}

エンタープライズのすべてのアカウントおよびアカウント・グループからの請求は単一の請求書に統合されます。これにより、請求管理が簡素化されます。各アカウント・グループまたはアカウントの使用コストを関連する部門またはチームに課金することによって、エンタープライズ内のリソース使用量のコストを回収できます。

エンタープライズ階層および任意の使用量を表示するには、エンタープライズ全体のエンタープライズ・サービスに対するエディターまたは管理者の役割が設定されたアクセス・ポリシーが必要です。以下のステップでは、例として {{site.data.keyword.Bluemix_notm}} コンソールが使用されていますが、CLI または API を使用してこれらのステップを実行することもできます。

1. エンタープライズ・アカウント内で**「管理」 > 「使用量」**と移動して、各部門の使用コストを見つけます。最新の請求書に含まれる使用量を表示するには、**「時間フレーム」**メニューで前月を選択します。

  アカウント・グループのコストが表形式でリストされます。これらのコストには、請求地域で課金される税を除くすべての料金が含まれます。使用コストの明細を表示するには、アカウント・グループ名をクリックして、それに含まれるアカウントおよびアカウント・グループを表示します。

1. アカウント・グループに対応する会社内の部門を特定します。

   アカウント・グループに割り当てられている連絡先が、コストを回収する部門に関連付けられている場合、連絡先を見つけることがこの情報を見つけるための 1 つの方法です。**「管理」 > 「エンタープライズ」**と移動し、**「アカウント」**を選択します。各アカウント・グループの連絡先が表形式でリストされます。

   ただし、請求処理の慣例は会社によって異なります。例えば、アカウント・グループ連絡先が、課金したい部門に関連付けられていないテクニカル・フォーカルである可能性もあります。会社の会計処理に従って正しい部門であることを必ず確認してください。

   会社で請求コードを使用してコストを部門に課金している場合、コードを簡単に識別できるようにアカウント・グループ名に請求コードを追加します。例えば、`Sales - A2B3` のようにします。
   {: tip}

1. 各アカウント・グループの使用コストを識別された部門と組み合わせて、会社のプロセスに従って課金額を送信します。
